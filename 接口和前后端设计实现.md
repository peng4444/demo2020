# 接口设计&前后端分离
## 接口设计
### 接口设计的原则
```markdown
- 1.对外隐藏内部实现。
- 2.设计接口结构时,明确每个字段的含义，以及客户端的处理方式。

后端返回结果
{
    "flag": false,
    "code": -1,
    "message": "用户名不存在",
    "data": null
}
```
## 理解RESTful设计
[一文搞懂RESTful API](https://www.cnblogs.com/bigsai/p/14099154.html)
[理解RESTful：理论与最佳实践](https://www.cnblogs.com/yonghengzh/p/13750612.html)
[REST API 设计规范与最佳实践](https://github.com/Highflyer/REST_API_DESIGN_GUIDE)
```markdown
REST（Representational State Transfer，表现层状态转换）是一种软件架构风格、设计风格，而不是标准，只是提供了一组设计原则和约束条件。
    它主要用于客户端和服务器交互类的软件。基于这个风格设计的软件可以更简洁，更有层次，更易于实现缓存等机制。
RESTful是一种风格而不是标准，而这个风格大致有以下几个主要特征：
    - 以资源为基础 ：资源可以是一个图片、音乐、一个XML格式、HTML格式或者JSON格式等网络上的一个实体，除了一些二进制的资源外普通的文本资源更多以JSON为载体、面向用户的一组数据(通常从数据库中查询而得到)。
    - 统一接口: 对资源的操作包括获取、创建、修改和删除，这些操作正好对应HTTP协议提供的GET、POST、PUT和DELETE方法。
        换言而知，使用RESTful风格的接口但从接口上你可能只能定位其资源，但是无法知晓它具体进行了什么操作，需要具体了解其发生了什么操作动作要从其HTTP请求方法类型上进行判断。
        具体的HTTP方法和方法含义如下：
            - GET（SELECT）：从服务器取出资源（一项或多项）。
            - POST（CREATE）：在服务器新建一个资源。
            - PUT（UPDATE）：在服务器更新资源（客户端提供完整资源数据）。
            - PATCH（UPDATE）：在服务器更新资源（客户端提供需要修改的资源数据）。
            - DELETE（DELETE）：从服务器删除资源。
    - URI指向资源：URI = Universal Resource Identifier 统一资源标志符，用来标识抽象或物理资源的一个紧凑字符串。
        URI包括URL和URN，在这里更多时候可能代指URL(统一资源定位符)。RESTful是面向资源的，每种资源可能由一个或多个URI对应，但一个URI只指向一种资源。
    - 无状态：服务器不能保存客户端的信息， 每一次从客户端发送的请求中，要包含所有必须的状态信息，会话信息由客户端保存，服务器端根据这些状态信息来处理请求。
        当客户端可以切换到一个新状态的时候发送请求信息， 当一个或者多个请求被发送之后, 客户端就处于一个状态变迁过程中。 每一个应用的状态描述可以被客户端用来初始化下一次的状态变迁。
标准的REST约束应满足以下6个原则：
    - 客户端-服务端（Client-Server）: 这个更专注客户端和服务端的分离，服务端独立可更好服务于前端、安卓、IOS等客户端设备。
    - 无状态（Stateless）：服务端不保存客户端状态，客户端保存状态信息每次请求携带状态信息，以便于服务端能够识别客户端的状态。
    - 可缓存性（Cacheability） ：服务端需回复是否可以缓存以让客户端甄别是否缓存提高效率。
    - 统一接口（Uniform Interface）：通过一定原则设计接口降低耦合，简化系统架构，这是RESTful设计的基本出发点。
    - 分层系统（Layered System）：客户端无法直接知道连接的到终端还是中间设备，分层允许你灵活的部署服务端项目。
    - 按需代码（Code-On-Demand，可选）：按需代码允许我们灵活的发送一些看似特殊的代码给客户端例如JavaScript代码。
RESTful API设计规范:
    从URL路径、HTTP请求动词、状态码和返回结果等方面详细考虑。
    - 从大体样式了解URL路径组成之后，对于RESTful API的URL具体设计的规范如下：
        - 1.不用大写字母，所有单词使用英文且小写。
        - 2.连字符用中杠"-"而不用下杠"_"
        - 3.正确使用 "/"表示层级关系,URL的层级不要过深，并且越靠前的层级应该相对越稳定
        - 4.结尾不要包含正斜杠分隔符"/"
        - 5.URL中不出现动词，用请求方式表示动作
        - 6.资源表示用复数不要用单数
        - 7.不要使用文件扩展名
    - HTTP动词
        - RESTful风格的API则要求在URL上都以名词的方式出现，从几种请求方式上就可以看出想要进行的操作，这点与非RESTful风格的API形成鲜明对比。
    - 状态码和返回数据
        - 状态码主要分为五大类：
            1xx：相关信息
            2xx：操作成功
            3xx：重定向
            4xx：客户端错误
            5xx：服务器错误
        - 返回结果
            针对不同操作，服务器向用户返回数据，而各个团队或公司封装的返回实体类也不同，但都返回JSON格式数据给客户端。
RESTful API也有一些缺点
    1.比如操作方式繁琐，RESTful API通常根据GET、POST、PUT、DELETE 来区分操作资源的动作，而HTTP Method 本身不可直接见，是隐藏的，而如果将动作放到URL的path上反而清晰可见，更利于团队的理解和交流。
    2.并且有些浏览器对GET,POST之外的请求支持不太友好，还需要特殊额外的处理。
    3.过分强调资源，而实际业务API可能有各种需求比较复杂，单单使用资源的增删改查可能并不能有效满足使用需求，强行使用RESTful风格API只会增加开发难度和成本。
```


